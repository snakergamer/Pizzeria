<!DOCTYPE html>
<html lang="es">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Tienda - Pizzeria</title>
    <link rel="stylesheet" href="/css/styles.css">
</head>

<body>
    <nav>
        <div style="font-size: 1.5rem; font-weight: bold; color: var(--primary-color);">Pizzeria Premium</div>
        <div>
            <a href="/tienda">Inicio</a>
            <a href="/perfil">Perfil (<%= user %>)</a>
            <a href="/carrito">Carrito ðŸ›’</a>
            <a href="/logout">Cerrar SesiÃ³n</a>
        </div>
    </nav>

    <div class="container">
        <h1>Nuestro MenÃº</h1>

        <!-- Success Message from URL params (simple implementation) -->
        <script>
            const urlParams = new URLSearchParams(window.location.search);
            if (urlParams.get('status') === 'success') {
                document.write('<div class="success-message">Â¡Compra Exitosa! Gracias por tu pedido.</div>');
            }
        </script>

        <div class="product-grid">
            <% products.forEach(function(product) { %>
                <div class="product-card">
                    <h2>
                        <%= product.name %>
                    </h2>
                    <p class="product-price">$<%= product.price %>
                    </p>
                    <p>Existencias: <%= product.stock %>
                    </p>
                    <form action="/carrito/add" method="POST">
                        <input type="hidden" name="product_id" value="<%= product.id %>">
                        <div class="form-group">
                            <label for="quantity-<%= product.id %>">Cantidad:</label>
                            <input type="number" id="quantity-<%= product.id %>" name="quantity" value="1" min="1"
                                max="<%= product.stock %>" style="width: 60px; text-align: center;">
                        </div>
                        <button type="submit">AÃ±adir al Carrito</button>
                    </form>
                </div>
                <% }); %>
        </div>
    </div>
</body>

</html>